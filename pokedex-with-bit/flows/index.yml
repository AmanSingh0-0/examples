!Flow
version: '1'
with:
  workspace: "workspace"
  py_modules:
    - executors.py
executors:
  - name: crafter
    uses:
      jtype: ImageCrafter
  - name: encoder
    uses:
      jtype: BigTransferEncoder
  - name: vec_idx
    uses:
      jtype: DocVectorIndexer
      with:
        index_file_name: "image.json"
  - name: doc_idx
    uses:
      jtype: KeyValueIndexer
    needs: [gateway]
  - name: join_all
    #uses: _merge
    needs: [doc_idx, vec_idx]
    read_only: true
