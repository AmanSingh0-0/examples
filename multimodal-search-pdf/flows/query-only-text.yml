jtype: Flow  # this is a flow only for querying text data
version: '1'
with:
  workspace: './workspace'
  read_only: true
  py_modules:
    - flows/executors.py
executors:
  - name: craft                           # in this example we will first segment the pdf into image chunks and page text chunks
    uses:
      jtype: TextCrafter
  - name: segment
    uses:
      jtype: TextSegmenter
  - name: textEncoder                       # encode the text into embeddings
    uses:
      jtype: TextEncoder
  - name: textChunkIndexer
    uses:
      jtype: DocVectorIndexer
      with:
        index_file_name: 'text.json'
  - name: singleModalityRanker
    uses:
      jtype: SingleModalityRanker
  - name: KeyValueIndexer
    uses:
      jtype: KeyValueIndexer
    needs: singleModalityRanker
